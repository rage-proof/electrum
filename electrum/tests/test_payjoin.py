
from electrum import constants
from electrum.transaction import (tx_from_any, PartialTransaction, BadHeaderMagic, UnexpectedEndOfStream,
                                  SerializationError, PSBTInputConsistencyFailure,  convert_raw_tx_to_hex
                                  )




def main():
    psbt_test01 = 'cHNidP8BAHMCAAAAAY8nutGgJdyYGXWiBEb45Hoe9lWGbkxh/6bNiOJdCDuDAAAAAAD+////AtyVuAUAAAAAF6kUHehJ8GnSdBUOOv6ujXLrWmsJRDCHgIQeAAAAAAAXqRR3QJbbz0hnQ8IvQ0fptGn+votneofTAAAAAAEBIKgb1wUAAAAAF6kU3k4ekGHKWRNbA1rV5tR5kEVDVNCHAQQWABTHikVyU1WCjVZYB03VJg1fy2mFMCICAxWawBqg1YdUxLTYt9NJ7R7fzws2K09rVRBnI6KFj4UWRzBEAiB8Q+A6dep+Rz92vhy26lT0AjZn4PRLi8Bf9qoB/CMk0wIgP/Rj2PWZ3gEjUkTlhDRNAQ0gXwTO7t9n+V14pZ6oljUBIgYDFZrAGqDVh1TEtNi300ntHt/PCzYrT2tVEGcjooWPhRYYSFzWUDEAAIABAACAAAAAgAEAAAAAAAAAAAEAFgAURvYaK7pzgo7lhbSl/DeUan2MxRQiAgLKC8FYHmmul/HrXLUcMDCjfuRg/dhEkG8CO26cEC6vfBhIXNZQMQAAgAEAAIAAAACAAQAAAAEAAAAAAA=='
    psbt_test02 = 'cHNidP8BAHMCAAAAAY8nutGgJdyYGXWiBEb45Hoe9lWGbkxh/6bNiOJdCDuDAAAAAAD+////AtyVuAUAAAAAF6kUHehJ8GnSdBUOOv6ujXLrWmsJRDCHgIQeAAAAAAAXqRR3QJbbz0hnQ8IvQ0fptGn+votneofTAAAAAAEBIKgb1wUAAAAAF6kU3k4ekGHKWRNbA1rV5tR5kEVDVNCHAQcXFgAUx4pFclNVgo1WWAdN1SYNX8tphTABCGsCRzBEAiB8Q+A6dep+Rz92vhy26lT0AjZn4PRLi8Bf9qoB/CMk0wIgP/Rj2PWZ3gEjUkTlhDRNAQ0gXwTO7t9n+V14pZ6oljUBIQMVmsAaoNWHVMS02LfTSe0e388LNitPa1UQZyOihY+FFgABABYAFEb2Giu6c4KO5YW0pfw3lGp9jMUUAAA='
    psbt_test03 = 'cHNidP8BAJwCAAAAAo8nutGgJdyYGXWiBEb45Hoe9lWGbkxh/6bNiOJdCDuDAAAAAAD+////jye60aAl3JgZdaIERvjkeh72VYZuTGH/ps2I4l0IO4MBAAAAAP7///8CJpW4BQAAAAAXqRQd6EnwadJ0FQ46/q6NcutaawlEMIcACT0AAAAAABepFHdAltvPSGdDwi9DR+m0af6+i2d6h9MAAAAAAAEBIICEHgAAAAAAF6kUyPLL+cphRyyI5GTUazV0hF2R2NWHAQcXFgAUX4BmVeWSTJIEwtUb5TlPS/ntohABCGsCRzBEAiBnu3tA3yWlT0WBClsXXS9j69Bt+waCs9JcjWtNjtv7VgIge2VYAaBeLPDB6HGFlpqOENXMldsJezF9Gs5amvDQRDQBIQJl1jz1tBt8hNx2owTm+4Du4isx0pmdKNMNIjjaMHFfrQAAAA=='
    psbt_test04 = 'cHNidP8BAJwCAAAAAo8nutGgJdyYGXWiBEb45Hoe9lWGbkxh/6bNiOJdCDuDAAAAAAD+////jye60aAl3JgZdaIERvjkeh72VYZuTGH/ps2I4l0IO4MBAAAAAP7///8CJpW4BQAAAAAXqRQd6EnwadJ0FQ46/q6NcutaawlEMIcACT0AAAAAABepFHdAltvPSGdDwi9DR+m0af6+i2d6h9MAAAAAAQEgqBvXBQAAAAAXqRTeTh6QYcpZE1sDWtXm1HmQRUNU0IcBBBYAFMeKRXJTVYKNVlgHTdUmDV/LaYUwIgYDFZrAGqDVh1TEtNi300ntHt/PCzYrT2tVEGcjooWPhRYYSFzWUDEAAIABAACAAAAAgAEAAAAAAAAAAAEBIICEHgAAAAAAF6kUyPLL+cphRyyI5GTUazV0hF2R2NWHAQcXFgAUX4BmVeWSTJIEwtUb5TlPS/ntohABCGsCRzBEAiBnu3tA3yWlT0WBClsXXS9j69Bt+waCs9JcjWtNjtv7VgIge2VYAaBeLPDB6HGFlpqOENXMldsJezF9Gs5amvDQRDQBIQJl1jz1tBt8hNx2owTm+4Du4isx0pmdKNMNIjjaMHFfrQABABYAFEb2Giu6c4KO5YW0pfw3lGp9jMUUIgICygvBWB5prpfx61y1HDAwo37kYP3YRJBvAjtunBAur3wYSFzWUDEAAIABAACAAAAAgAEAAAABAAAAAAA='
    psbt_test05 = 'cHNidP8BAJoCAAAAApmUy3Oa6MdcM+j5cM1w7BIxlGz2D8GN2nK9tsbHmESKAQAAAAD+////BMkXzO/XlgaOAExsQbP9mumAyAslUiwThX1+gqF3Z6MBAAAAAP7///8CrUsAAAAAAAAWABSy6G0APFIK1Mygn/X1It3Sp7sjBpBfAQAAAAAAFgAU2nAe+KqvbhU63rT052pJUslTN3Ml/hsAAAEBH35MAAAAAAAAFgAU5vIbmekoqCDiLHT+jNPVowJ7t3giAgL2ZUi4zj2sIpPU0rQQvA98/9dUOMFyP/y2qhVwbj1zlUcwRAIgDF00uFWZ2c3F1IBiCaKxphKIlSv+ht1Lch8F++B3CAICIA0k1vhC6J6bkHC6jvhl4pYBYQ7TfoClydnLmeTG8Qs8ASIGAvZlSLjOPawik9TStBC8D3z/11Q4wXI//LaqFXBuPXOVGPdYxlpUAACAAQAAgAAAAIABAAAAAQAAAAABAR+QXwEAAAAAABYAFLdBo8LVBUf5Rg1DFUz1o6QjzUv6IgIDgKPoOPCNL7i4H37KFgY6750XHdQps/yQKbpkEO5dCalHMEQCIDdUvZLe4G+sZDPaY02Smner6TrpjWVofMcKCQfeTpHpAiBHAwHEgBGXEYq8O3rDoSFpJgE7B6nWhQGRCixOzxpJHQEiBgOAo+g48I0vuLgffsoWBjrvnRcd1Cmz/JApumQQ7l0JqRj3WMZaVAAAgAEAAIAAAACAAAAAAAgAAAAAIgIDhgLfaU5ScNGBBRX33y/qp7PgZFHQZSGO1qHmIfNtNlAY91jGWlQAAIABAACAAAAAgAEAAAACAAAAACICA5XOZXvPEUSTRt2Nf1qlYDp9Iq1Shm0sxKO7QD39ZWw/GPdYxlpUAACAAQAAgAAAAIAAAAAACQAAAAA='

    
    tx = tx_from_any(psbt_test05)
    print('TX')
    print(type(tx))
    tx.finalize_psbt()
    print('\n',tx.to_json())
    print('\ncomplete? ',tx.is_complete())
    
    print('\n',tx._serialize_as_base64())
    




if __name__ == '__main__':
    main()
